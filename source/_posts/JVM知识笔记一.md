---
title: JVM知识笔记一
date: 2019-08-10 15:10:04
tags:
- JVM
categories:
- JVM
- 面试题
---

**JVM学习笔记**

<!--more-->

#### 一、JVM模型概述

​		JVM是Java Virtual Machine(Java虚拟机)的缩写，JVM是一种用于计算设备的规范，它是一个虚构出来的计算机，是通过在实际的计算机上仿真模拟各种计算机功能来实现的。

​		引入Java语言虚拟机后，Java语言在不同平台上运行时不需要重新编译。Java语言使用Java虚拟机屏蔽了与具体平台相关的信息，使得Java语言[编译程序]只需生成在Java虚拟机上运行的目标代码(字节码)，就可以在多种平台上不加修改地运行。

Java程序从源码到运行一般有下面3步：

![](JVM知识笔记一\jvmp1.jpg)

从.class文件-->机器码这一步时，JVM类加载器加载字节码文件，然后解释器逐一解释执行。这种方式比较慢，后面引进了JIT(Just In Time Compiler 即时编译器)，将“热点代码”编译成与本地平台相关的机器码，并进行各种层次的优化，提高效率。

![](JVM知识笔记一\jvmp2.png)

在JDK8的版本中，方法区被移除，取而代之的是metaspace（元数据空间）。

- 程序计数器：它是一块较小的地址空间，它可以看作是当前线程所执行的字节码的行号指示器。是线程私有的，每个线程拥有一个程序计数器。为了使线程切换后可以回到正确的位置继续执行。
- Java虚拟机栈：线程私有，生命周期与线程相同。方法在执行时都会创建一个栈帧，用于存放局部变量表、方法出口等信息。局部变量表存放基本数据类型和对象引用。方法调用直至结束就对应着一个栈帧在虚拟机中入栈和出栈。
- 本地方法栈：与虚拟机栈相似，但是本地方法栈是为虚拟机所用到的Native方法，而虚拟机栈是为虚拟机执行Java方法服务。
- Java堆：他是Java虚拟机所管理的内存中最大的一块，被所有线程所共享，用来存放对象实例。所有的对象实例和数组都在堆上分配。java堆在逻辑上连续即可。
- 方法区：线程共享，用来存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据。